in0="""[   4.,   10.,   66.,   19.,   13.,   11.,   40.,   15.,   11.,    4.,   44.,    4.,  475.,  432.,
 1023., 1023., 1023.,  243.,  299.,  489.,  462.,  378.,  516.,  370.,  170.,  148.,  488.,  406.,
  403.,   52.,  171.,  174.,  174.,  172.,  171.,  162.,    1.,   24.,   16.,    0.]
[0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.]
[  35.,   18.,   17.,   37.,   -7.,   -3.,   -2.,  -79.,   78.,  172.,  -30.,   37.,   86.,   99.,
  -39.,  125.,   16.,   21.,  -83.,  -91.,    6.,  -91.,   -3.,  -45.,  136.,  -21.,   23.,  -17.,
   -7.,   89.,  -24.,   92.,  -14.,   25.,    1.,   58.,  -40.,  169.,   99.,  -95., -142.,  -29.,
   -1.,  -44.,   15.,  -40.,   51.,   -8.,  -77.,    6.,    0.,    0.,    0.,   -2.,   -4.,    1.,
   16.,    3.,    3.,   -2.,    0.,   26.,    1.,  -16.,   -5.,   -4.,    2.,   -2.,   -6.,    9.,
   -3.,   -1.,  116.,   -2.,   -8.,    4.,  -14., -208.,   -4.,  -30.,   66.,  -31.,    3.,   -3.,
    4.,   20.,   11.,  -28.,  -26.,    3.,   67.,  -30.,  -29.,   39.,   -1.,  -13.,   28.,    0.,
   -2.,    3.,    0.,  294.,    6.,  -28.,  -31.,   18.,   -6.,   -5.,   -5.,  -64.,   -2.,    7.,
    8.,   45.,  -21.,  -18.,   36.,   -7.,    4.,    3.,   46.,  -71.,  -13.,    0.,   76.,   21.,
   13.,   21.,   25.,   75.,  -35.,    0.,  -19.,   84.,   -9., -213.,   48.,   28.,   37.,  -33.,
   22.,  -14.,   29.,  -27.,   29.,  -30.,    6.,   -4.,    8.,   -4.,    2.,    8.,  -19.,    6.,
    4.,  -14.,   -1.,  -42.,   -9.,  103.,   18.,   -6.,  -52.,   41.,    3.,   -2.,   58.,    1.,
    8.,  -20.,    1.,    2.,   -5.,  -32.,   -5.,  -25.,  -65.,   12.,   -6.,    2.,    8.,   46.,
   -7.,  -13.,   -6.,   -3.,    5.,    5.,  -26.,   -1.,   14.,   10.,   18.,  -11.,    4.,    0.,
   -8.,  -42.,    1.,  -31.,  -16.,    0.,   -5.,   12.,    1.,   44.,  -10.,  -14.,   14.,  -16.,
  -19.,   -3.,   -2.,    0.,   17.,   -3.,  -21.,   76.,   19.,   17.,   84.,   -3.,   -8.,   -4.,
  -11.,  131.,  -25.,    5., -149.,  -88.,  -23., -194., -191.,    2.,  -64.,  -45., -116.,  -61.,
   -2.,   62.,   29.,   -7.,   -4.,   -8.,   37.,    2.,   10.,   21.,   17.,   -9.,    2.,    9.,
    6.,  -55.,   -4.,   66.,   21.,    6.,  -17.,   74.,   13.,  -17.,   35.,   -1.,  330.,  213.,
   18.,   69.,   -9.,  102.,  -23.,   -1.,  -76., -191.,  -96.,   59.,   -6.,   59.,  119.,  -90.,
   15.,  -68.,   15.,   40.,    0.,   21.,  -21.,  -19.,    6.,   -3.,   -6.,   -3.,  -30.,   -8.,
   -5.,    1.,  -14.,    6.,   -8.,    7.,    0.,    8.,   -4.,    1.,    2.,   10.,   69.,   -1.,
    1.,  -26.,  -20.,    2.,   -1.,  -12.,  -15.,    9.,   -7.,  -17.,  -11.,  -10.,   12.,   42.,
   -2.,   11.,    7.,    1.,   -7.,   58.,    7.,    2.,  -39.,   11.,   11.,    1.,  -42.,   98.,
  -13.,   -1.,   -1.,   -2.,    1.,   -3.,   -3.,    0.,  -15.,    5.,   -1.,    3.,   -1.,    4.,
   -1.,   -3.,    0.,    3.,   29.,   70.,   -3.,   -6.,   14.,    2.,    6.,    0.,    0.,   -2.,
    7.,   12.,    1.,    1.,    6.,   -6.,   -2.,   -1.,    1.,   -2.,    2.,   -1.,    1.,    7.,
  -11.,   10.,   -3.,    6.,   -6.,    3.,    1.,    6.,   -1.,    2.,   -2.,    4.,    3.,   -2.,
   12.,   -1.,    2.,    0.,    1.,    1.,    1.,   -5.,    3.,   -4.,  -55.,    8.,    3.,   17.,
  -14.,    0.,    3.,   26.,   -1.,    0.,  -19.,    3.,   -6.,    3.,   -3.,    7.,   -6.,   -4.,
    8.,  311.,  -11.,   57.,    4.,    3.,    7.,    4.,    2.,    7.,    1.,    5.,    9.,   -2.,
    1.,   -2.,   -5.,   -3.,   21.,  -10.,   -4.,   -5.,    2.,    6.,   -6., -226.,   10.,  -20.,
    1.,   16.,   31.,   56.,    0.,  -16.,  -26.,  -16.,    5.,    1.,    1.,   -1.,    3.,    2.,
    0.,   -2.,    4.,   -2.,   -2.,   -2.,    1.,    2.,   -2.,    4.,    2.,    1.,  -25.,   -4.,
   -1.,    5.,   -5.,    3.,   -3.,    3.,   -1.,    1.,    2.,   -1.,    2.,   -3.,    0.,   -2.,
    0.,    1.,    2.,   -6.,    0.,    1.,    2.,    2.,  -23.,   -5.,    2.,    8.,    0.,   -2.,
   -1.,   -1.,    2.,   -2.,   11.,    1.,    0.,   -1.,    0.,   -6.,   -1.,   -1.,    0.,   -5.,
    3.,    0.,    0.,    0.,   25.,    0.,   -3.,   -9.,    0.,   -8.,    2.,    2.,   -1.,    1.,
   -1.,    0.,    1.,   -4.,   -5.,    0.,   -2.,    2.,    2.,   -1.,   -2.,    5.,    2.,    4.,
    4.,   39.,   -1.,   -1.,   22.,   -3.,  -10.,    2.,   -1.,   -2.,  -11.,    3.,    0.,    2.,
   -4.,  -20.,    0.,   -1.,   -5.,    7.,   -4.,    5.,    2.,   -4.,   29.,  -12.,   -5.,   -9.,
   -5.,   -6.,    9.,    2.,   -8.,   -4.,  -12.,    8.,   -2.,   15.,   11.,    7.,    4.,   -9.,
   -6.,   -2.,   -3.,   -5.,    1.,   -2.,    5.,  -23.,    8.,    7.,   36.,   17.,  123.,   -7.,
   -3.,  -52.,  103.,   57., -121.,   26.,   -3.,  223.,   41.,  -27., -127.,  107.,  202.,   93.,
   -1.,   -1.,   78.,  -70.,   11.,  -74.,   20.,  -69.,  -23.,    6.,    2.,    0.,   -4.,    1.,
    0.,   -1.,  -30.,    5.,    0.,    0.,    0.,    8.,    2.,   -1.,   -8.,   -2.,    2.,   17.,
  -13.,    2.,  -23.,   -1.,  -26.,   -5.,    9.,    1.,    9.,  -20.,    2.,   -6.,    8.,    3.,
   -4.,    4.,   -4.,    1.,    0.,    8.,   -2.,  -27.,  -12.,   24.,    2.,  -11.,  -24.,   -1.,
  -15.,   -4.,    9.,   -1.,    8.,  -34.,    0.,    0.,   11.,   -2.,   -1.,    2.,   -3.,   11.,
    3.,    3.,   -4.,  -40.,   -9.,   18.,  -10.,   -5.,  -19.,   -9.,  203.,  305., -109.,   21.,
  114.,  156.,  -14.,  -17.,   -1.,   53.,    0.,   -9.,  325.,   14.,  107., -106.,    4.,  -24.,
   55.,   -3.,  -15.,    4.,   65.,   -2.,  -23.,  -58.,   37.,  -30.,  -27.,  -31.,   44.,  -39.,
  -38.,  -19.,  -58.,   -7.,   35.,   34.,  -21.,  -25.,    0.,   19.,  -29.,    8.,   -6.,  -45.,
   33.,  -72.,  -17.,  -39.,  -12.,   14.,  -44.,   -9.,  171.,   26.,  -25.,  505.,    5.,   11.,
   18.,  133.,   15.,  224.,   16.,  -69.,   57.,   51.,  -45.,   -4.,   56.,  698.,  -79.,   -6.,
    3.,   -2.,   25.,  -24.,    1.,  -27.,    2.,   -8.,    1.,   31.,   -3.,  -28.,    4.,  -22.,
   16.,   -1.,    6.,  184.,   27.,  -19.,   82.,  -20.,  -62.,   -4.,   11.,  -20.,   26.,   62.,
    8.,   -8.,   70.,  -13.,  -19.,   24.,    3.,   21.,    6.,  -16.,    1.,  -10.,  -18.,  114.,
  -25.,    2.,  105.,  -57.,  -16.,  -15.,    3.,  -28.,   12.,  179.,    3.,   -9.,  -66.,  -29.,
  -38.,    6.,   17.,   91.,    6.,  -19.,  -12.,   67.,    0.,   56., -109.,   26.,   62.,  -68.,
    9.,   -6.,  -12.,  -23.,  551.,   -7.,   -2.,   79.,   23., -639.,  -15.,  -24.,  -13.,   -6.,
   -3.,  -28.,   10.,  -45.,  -25.,  -45.,   -6.,   10.,   21.,   63.,   -1.,    0.,    0.,   -1.,
    0.,    0.,    0.,    0.,   -1.,   -1.,   -1.,    1.,   -1.,   -4.,    1.,    0.,    0.,    1.,
    2.,   -4.,    0.,   -1.,   -3.,   -2.,    7.,   45.,    3., -107., -151.,  -25., -238.,   -4.,
   34.,   16., -149.,   -4.,    2.,  -62.,  -23.,   28.,    9.,   30.,  -97.,  -47.,   32.,   13.,
  -41.,   25.,  -86.,  164.,    9.,    8.,   57.,  144.,   31.,  -51.,   44.,  -53.,  -20.,   42.,
  -51.,   85.,   47.,  110.,  -33.,   64.,  -28.,  182.,  -31.,   77.,  134.,  -70.,  -12.,   11.,
    2.,   -5.,    4.,   14.,   -4.,    5.,   -6.,  -13.,   -9.,    1.,    2.,   -4.,    7.,   -6.,
    3.,   -1.,    1.,   -5.,    8.,    4.,   -4.,    4.]
[ 257.,  -28.,   34.,   52.,  -39., -309.,   42.,   -8., -100.,   60.,   91., -137.,   25., -175.,
  -28.,  -80.,  -29.,  -73.,   72.,  -14.,  137.,  -31.,  -20.,   84.]
[  30.,  -21.,    0.,  -27.,  -22.,   -6.,   22.,  -31.,  -15.,    3.,  -53.,  -57.,   24.,  -18.,
  -88.,  -38.,  -16.,  -47.,  -22.,   64.,   91.,    9.,  -29.,  -38.,  -23.,   -5.,  -43., -160.,
    5.,   61.,   62.,  -64.,   65.,   15.,   58., -165.,    1.,  -15.,   -4.,  -13.,   34.,   46.,
   23.,   79.,   58.,    2.,   22.,  -27.,  134.,   83.,   88.,  -39.,   10.,  -57.,   19.,  119.,
   21.,   83.,  -27.,  -82.,  -30.,  -66.,  -73., -408., -114., -109.,  171., -299., -123.,   62.,
   24., -127.,  -89.,   78., -129., -136.,   67.,  107.,  -92., -114.,  118.,  -46., -152., -163.,
  105.,   77.,   58.,  263., -228.,   29., -120.,  -86.,  -99.,  -49.,  -36.,  -26.,   11.,  -67.,
   74., -143.,  -26.,   23.,  -41.,   20.,   22.,  -46.,   -8., -394.,   16.,   33.,  -68., -258.,
  -91.,  -21.,    5.,   -1.,   83.,  101.,   42., -103., -131.,    5.,   31.,    1.,  -13.,  -26.,
   -8.,    5.,   22.,   -3.,  -24.,   39.,    9.,   -2., -135.,  -60.,  -26.,  -39.,   -6.,   11.,
   51.,   17.,  -17.,  -17.,   54.,    8.,  -58.,  148.,    3.,   38., -244.,  103.,  -62.,   69.,
  -79.,  159.,   42.,  -71.,   26.,  -83.,   51.,  -29.,   -3.,  -29.,  -20., -173.,   -5.,   46.,
   -4.,    8.,   35.,   47.,  -37.,  -82.,    7.,   94.,  -78.,   26.,  -76.,  -94.,    3.,  -43.,
  341.,  137.,    6.,   97.,   13.,  -85.,  -92.,    5.,    8.,  -46.,   81.,  -15.,  -38.,    8.,
   16.,    0.,   -8.,  -18.,  -30.,   21.,   20.,  108.,  -11.,   28.,   67.,   -4.,    6.,   24.,
   20.,  -45.,  -58.,  -26.,    5.,   12.,   53.,  -24., -103.,  -91.,  -44.,    6., -164.,  135.,
   17.,   -9.,  -93.,  -57.,   97.,   23., -131., -106.,   48., -184.,    0.,    3.,  148.,    3.,
   23.,    3.,  119., -144.,   92.,  -44.,  -12.,    2.,  110.,  153., -157., -114.,   10.,  402.,
   14.,  163.,  -48.,   35.,  169.,  -56.,   37.,  -73.,  -45.,  -27.,    1.,  -24.,  -19.,  -32.,
    4.,   41.,  -34., -126., -110.,  123., -109.,   11.,   12.,  238.,   59.,   21., -159., -138.,
   40.,  -57.,   79.,    3.,  112.,  175.,  -67., -175.,   40.,  146.,  -49.,   71.,  -52., -104.,
   22.,  -85.,   -8.,   -3.,   60.,  -80.,    3.,  306.,   36.,   46., -206.,   -4., -107.,  -17.,
  -15.,   29.,  131.,  -73.,   36.,   82.,   76.,    2.,  -34.,   20.,    4.,  -30.,   47.,    4.,
   19.,   52.,   13.,  -16.,   14.,   17.,  -11.,    8.,   -9.,   38.,    8.,  -48.,  -12.,   10.,
   71.,  217.,  -33.,   19., -114.,  106.,  -29., -232.,  -49.,   36.,   41.,  335.,   28., -122.,
  233.,  114.,  -69.,   98., -128.,  182.,    6., -129.,   58.,   33.,   19.,   95.,   56.,   46.,
  -43.,   -3.,   24.,   46.,  -20.,   23.,   57.,   68.,   12.,   38.,   42.,   45.,   75.,   20.,
   25.,    6.,  -44.,   29.,  -26.,    8.,  -43.,   62.,   17., -108.,  -24.,   13., -162.,  -31.,
 -101.,  -27.,  -55.,   81.,  -34., -117.,   86., -106., -227.,   10.,  -28.,  -31., -107.,  -77.,
   61.,   31.,  142.,    2.,  -49.,   35.,   22.,   34.,   48.,  -17.,  -19.,   36.,   71.,  152.,
  -11.,   17.,  209.,   70.,   78.,   44.,   47.,  -56., -116.,  -38.,   15.,   16.,   26.,   31.,
    7.,    6.,   34.,    5.,  -49.,   -5.,    6.,  -38.,  -16.,  -32.,   -2.,  -10.,  -33., -137.,
  -53.,    0.,   56.,  -34.,   22.,   16.,    5.,   14.,   21.,    8.,  -29.,   19.,  -14.,   33.,
  -51.,  -49.,  281.,  -33.,  -29., -114.,   70.,    6., -162.,  -31.,  262.,  -44.,   10.,  239.,
  171.,   84.,  -60.,  -60., -125.,  117.,   85.,   41.,  -22.,   19.,   94.,    6.,  144.,  -34.,
   -6., -124.,  -18.,   12.,  -99.,  -38.,   14.,  -27.,  -44.,   96.,  102.,   58.,  -10.,  -18.,
  109.,   66.,    2.,   46.,   70.,  -14., -152.,  126.,  -37.,  -62.,  -23., -181.,  -63.,  -71.,
  -56., -376.,  -45.,  -13.,   73.,  -44.,   26.,  110.,   -5.,    0.,   29.,   18.,   16.,  -52.,
   49.,  133.,  231.,  -19.,   48.,    1.,  101.,  114.,   -2.,  -58.,  146.,   66.,   56.,  -11.,
   10.,  -19.,  -19.,  -65.,   84.,   59.,  -21.,  -26.,    2.,  101.,   29.,    4., -259.,  -73.,
  -11.,   15.,  117.,  469.,    2., -128.,   -2., -294.,   42.,  -18.,  120.,  -16.,  -28., -131.,
   80.,  -36.]
[-377., -165.,   26.,   48.,  -31.,   41., -303.,  196., -538., -146.,    2.,  361., -165.,  100.,
  207.,  220., -357.,   97., -124.,  -65., -365.,   10.,  -71.,  -94.]
[-387.,   45., -186.,  440.,   93.,   91., -412., -296., -208., -221.,  348.,  120., -315.,   77.,
 -215., -584.,  242.,  219.,  187.,  -24.,  -30.,  304.,  137.,   17.,   72., -116.,  277., -386.,
   63.,  100.,   99.,  -16., -116.,   24., -211.,   78., -154., -249.,  -16.,   96.,  -64.,  -43.,
  -60.,  169., -290.,  -73.,  159.,  -31., -128.,  264.,   52.,  244.,  262.,   74.,   28.,  239.,
  -17., -431.,   18.,    3.,   33.,   20., -292., -496.,  109.,  226., -190.,   13., -446., -151.,
  126.,  -36.,  159.,   37.,  -25.,  -37., -280., -430.,  428.,  -88., -239., -157., -697.,  736.,
 -151., -254.,  192.,  289.,  162.,  243., -340.,  331., -170.,   33., -133., -340.,  -29.,  -68.,
   14.,   14.,  232., -240.,  -26., -136.,  -80., -634.,  -51.,  115., -110.,  -83., -542., -350.,
  158., -132.,  205., -260.,  149.,  -48., -156., -317., -329.,   74.,  -42.,    5.,   -9.,  209.,
  -79.,  303.,   73.,   18.,   92., -159., -228.,  163.,  131.,   88.,   95.,  -92., -133.,  -96.,
  262.,   90.,  136.,  168., -109.,   66.,    8., -140., -280.,  109.,  -20.,   68.,  509.,  132.,
 -227., -304.,  248., -339.,  161.,  432.,  -16., -204.,   28.,   75.,  113., -247.,  122., -156.,
 -281., -192., -185.,  489., -285.,  301.,  -77., -420., -557., -132., -493.,  483.,   51., -105.,
 -222., -239.,  276., -552., -452.,   99., -104., -174., -218., -462.,  142.,  358.,  491., -738.,
    0.,  171.,  118.,  669.,  -84.,  245.,  169., -190.,  -11., -639.,  392.,  449.,   51., -135.,
 -431.,  120.,  -17., -235.,  -66., -215., -288.,  174., -226.,  403., -156.,  -18.,  178.,  241.,
  -18.,   47.,  -10., -355., -158.,  -95.,   61., -101.,   -6.,  175.,   33.,    9.,  -10.,  -84.,
  330.,  251.,  267., -110.,  -82.,  373.,  -20., -152., -120.,  -62.,  165.,    2., -175.,   61.,
  139.,  101.,  -11.,  138.,  -55.,  -19., -114.,  118.,  276., -166., -331.,  162.,   71.,  242.,
   49.,  207.,  -34.,  198., -186., -321., -458., -219., -280.,  225., -145.,   75., -518.,   48.,
 -296., -242., -340.,   76.,   88.,  245., -245., -206.,  -60., -188.,  233., -158.,  230.,  341.,
 -275., -403., -151., -202.,  249., -340.,  383.,   17., -406.,  423., -180.,  -60., -364., -255.,
  219.,  -79., -310., -332.,  -58., -277., -335.,  -16.,  -82.,   35.,   25.,  196.,  417.,  -95.,
  288., -337.,  -24.,   79., -240., -276., -350.,   30.,  272., -130.,  260.,  159.,   57.,  582.,
   43.,  177., -125.,  108., -400.,  -93.,  782.,  356.,  456.,  387., -219., -143.,   23., -266.,
  529.,  189., -395.,  417.,   54.,  206.,   98.,   24., -494.,  184.,   -9., -363.,  -16., -132.,
  130.,   63., -357., -368., -175., -166., -255.,  317.,   21., -181., -215.,  269., -331., -237.,
 -521.,  258.,  150.,  125., -137.,  144.]
[  -41.,   443.,   954.,  -759.,   119.,   739., -1023.,    42.,   -27.,  -171.,   952.,  -699.,
   543.,  -564.,   -86.,   790.]
[ 560.,  558.,  562., -771., -505.,  482.,  401.,  345.,  336.,  368.,  393., -558.,  559., -333.,
  575.,  579.]
[0.]
"""


header="""#ifndef __EMTF_HLSLIB_NNET_WEIGHTS_H__
#define __EMTF_HLSLIB_NNET_WEIGHTS_H__

namespace emtf {

namespace details {

constexpr static const int num_nodes_nnet_0_layer_0 = 40;
constexpr static const int num_nodes_nnet_0_layer_1 = 24;
constexpr static const int num_nodes_nnet_0_layer_2 = 24;
constexpr static const int num_nodes_nnet_0_layer_3 = 16;
constexpr static const int num_nodes_nnet_0_layer_4 = 1;
"""

footer="""}  // namespace details

}  // namespace emtf

#endif  // __EMTF_HLSLIB_NNET_WEIGHTS_H__ not defined
"""

opening = [
  'constexpr static const int weights_nnet_0_layer_0[40] = {',
  'constexpr static const int biases_nnet_0_layer_0[40] = {',
  'constexpr static const int weights_nnet_0_layer_1[40 * 24] = {',
  'constexpr static const int biases_nnet_0_layer_1[24] = {',
  'constexpr static const int weights_nnet_0_layer_2[24 * 24] = {',
  'constexpr static const int biases_nnet_0_layer_2[24] = {',
  'constexpr static const int weights_nnet_0_layer_3[24 * 16] = {',
  'constexpr static const int biases_nnet_0_layer_3[16] = {',
  'constexpr static const int weights_nnet_0_layer_4[16 * 1] = {',
  'constexpr static const int biases_nnet_0_layer_4[1] = {',
]

closing = ['};' for _ in opening]

def parse_fn(x):
  ret = []
  stop = False
  for line in x.split('\n'):
    if line:
      ret.append(line)
      if '[' in line:
        stop = False
      if ']' in line:  # '[' and ']' can appear in the same line
        stop = True
      if stop:
        txt = '\n'.join(ret)
        yield txt
        del ret[:]

def write_fn(x, fname='nnet_weights.h'):
  if not isinstance(x, (list, tuple)):
    x = list(x)

  assert len(x) == len(opening)

  # Remove square brackets and decimal points
  def format_txt(i, txt):
    txt = txt.replace('[', '\n ').replace(']', '\n').replace('.', '')
    txt = '{}{}{}\n'.format(opening[i], txt, closing[i])
    return txt

  # Join header, body, and footer
  txt = [header,] + [format_txt(i, txt) for i, txt in enumerate(x)] + [footer,]
  txt = '\n'.join(txt)

  with open(fname, 'w') as f:
    f.write(txt)

if __name__ == '__main__':
  write_fn(parse_fn(in0))
